# Лабораторная работа №4: Система аутентификации и разграничения доступа

## Цель работы
Реализация системы аутентификации пользователей с разграничением прав доступа к данным. Освоение принципов безопасного хранения паролей и управления сессиями пользователей.

## Техническое задание

### 1. Система аутентификации пользователей
**Задача:** Модифицировать приложение из лабораторной работы №3, добавив систему регистрации и аутентификации пользователей.

**Требования к системе аутентификации:**
- **Регистрация** новых пользователей с проверкой уникальности логина
- **Аутентификация** существующих пользователей
- **Хранение паролей** в хешированном виде
- Использование простой хеш-функции (например, на основе циклического сдвига и XOR)

### 2. Разграничение доступа к данным
Реализовать механизм изоляции данных между пользователями:

**Требования к системе доступа:**
- Каждый пользователь работает только со своими данными
- Данные разных пользователей хранятся в отдельных файлах
- При загрузке данных программа загружает только данные текущего пользователя
- Один пользователь не имеет доступа к файлам другого пользователя

### 3. Модификация системы хранения данных
**Новая структура хранения:**
- **Файл пользователей** - хранит учетные данные (логины, хеши паролей)
- **Индивидуальные файлы данных** - для каждого пользователя создается отдельный файл данных

### 4. Модификация меню управления
Добавить в существующее меню новые пункты:
- **Регистрация** - создание новой учетной записи
- **Вход** - аутентификация существующего пользователя

### 5. Безопасное хранение паролей
**Требования к хранению учетных данных:**
- Пароли никогда не хранятся в открытом виде
- Использование хеширования (например, комбинация XOR и циклического сдвига)
- Хранение только хеша пароля

### 6. Управление сессиями
Реализовать систему сессий пользователя:
- Сохранение состояния текущего пользователя во время работы
- Автоматическая загрузка данных текущего пользователя при старте (если доступно)

## Требования к реализации

### Простой алгоритм хеширования:
Пример реализации:
```c
// Простая хеш-функция на основе XOR и циклического сдвига
unsigned int simple_hash(const char *password) {
    unsigned int hash = 0;
    for (int i = 0; password[i] != '\0'; ++i) {
        hash = (hash << 3) | (hash >> 29); // Циклический сдвиг
        hash ^= password[i]; // XOR с текущим символом
    }
    return hash;
}
```

### Модификация модульной архитектуры:
- Создание отдельного модуля для работы с пользователями и аутентификацией
- Модуль для управления сессиями и правами доступа
- Минимальное изменение существующей логики CRUD операций

### Минимальная структура данных пользователей:
```c
typedef struct {
    char username[50];
    unsigned int password_hash;
} User;
```

### Формат хранения файлов (ПРИМЕР):
- `users.dat` / `baragodlike_credits.dat` - бинарный файл с данными пользователей / на каждого пользователя отдельный файл (объяснить выбор)
- `data_baragodlike.dat` - индивидуальные файлы данных приложения для каждого пользователя

## Критерии оценки

### Код программы (6 баллов):
- **2 балла** - реализована система регистрации и аутентификации с хешированием паролей
- **2 балла** - корректно работает разграничение доступа к данным между пользователями
- **2 балл** - грамотное расширение модульной архитектуры

### Защита работы (6 баллов):
- **2 балла** - студент может объяснить принципы хеширования паролей и разграничения доступа
- **2 балла** - студент понимает архитектуру системы и механизмы изоляции данных
- **2 балла** - студент уверенно отвечает на дополнительные вопросы по теме работы

**Примечание:** Все требования из предыдущих лабораторных работ остаются в силе, если не противоречат новым задачам. Основное внимание уделяется корректной изоляции данных пользователей и работе системы аутентификации.
