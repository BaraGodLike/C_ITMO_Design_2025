# Лабораторная работа №3: Работа с бинарными файлами

## Цель работы
Освоение принципов работы с бинарными файлами в языке C, реализация механизмов сохранения и загрузки данных между сессиями приложения. Развитие навыков работы с файловыми операциями (fopen, fread, fwrite, fseek) и обеспечения целостности данных.

## Техническое задание

### 1. Расширение функциональности CRUD приложения
**Задача:** Модифицировать приложение из лабораторной работы №2, добавив возможность сохранения данных в бинарные файлы и их загрузки при запуске.

### 2. Система работы с файлами
Реализовать механизм сохранения и загрузки данных:

**Требования к сохранению:**
- **Автоматическое сохранение** при завершении работы программы
- **Ручное сохранение** через пункт меню
- Сохранение всей коллекции данных в **бинарном формате**
- Использование функций `fwrite()` и `fread()` для работы с данными

**Требования к загрузке:**
- **Автоматическая загрузка** данных при запуске программы
- Проверка существования файла данных перед загрузкой
- Восстановление полного состояния приложения из файла

### 3. Модификация меню управления
Добавить в существующее меню новые пункты:
- **Сохранить данные** - принудительное сохранение текущего состояния
- **Загрузить данные** - загрузка данных из файла (с подтверждением перезаписи текущих данных)
- **Создать новую базу** - очистка текущих данных и начало работы с пустой коллекцией

### 4. Формат хранения данных
**Структура бинарного файла:**
- **Заголовок файла** - служебная информация (версия формата, количество элементов, контрольная сумма)
- **Данные элементов** - последовательная запись всех элементов коллекции в бинарном виде
- **Целостность данных** - реализация простой проверки целостности (контрольная сумма или магическое число)

### 5. Обработка ошибок файловых операций
Реализовать обработку следующих ситуаций:
- Отсутствие файла данных при загрузке
- Ошибки чтения/записи (недостаточно места, поврежденный файл)
- Несоответствие формата файла

## Требования к реализации

### Обязательные файловые операции:
- `fopen()` - открытие файла в соответствующих режимах
- `fclose()` - корректное закрытие файла
- `fwrite()` / `fread()` - работа с бинарными данными

### Модификация модульной архитектуры:
- Создание отдельного модуля для работы с файлами
- Четкое разделение ответственности между модулями
- Минимальное изменение существующей логики CRUD операций

### Управление памятью при загрузке:
- Корректное освобождение существующих данных перед загрузкой новых
- Динамическое выделение памяти для загружаемых данных

## Критерии оценки

### Код программы (6 баллов):
- **2 балла** - программа корректно сохраняет и загружает данные в бинарном формате
- **2 балла** - реализована обработка ошибок файловых операций и обеспечение целостности данных
- **2 балл** - грамотное расширение модульной архитектуры

### Защита работы (6 баллов):
- **2 балла** - студент может объяснить принципы работы с бинарными файлами и отличие от текстовых
- **2 балла** - студент может обосновать выбор структуры бинарного файла и механизмов обеспечения целостности
- **1 балл** - студент объясняет обработку ошибок файловых операций
- **1 балл** - студент уверенно отвечает на дополнительные вопросы по теме работы

**Примечание:** Данная лабораторная работа является развитием предыдущей, поэтому все требования из лабораторной работы №2 остаются в силе, если не противоречат новым задачам.
